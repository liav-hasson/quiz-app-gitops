app:
  name: redis
  replicaCount: 1
  image:
    repository: redis
    tag: "7-alpine"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 6379
    targetPort: 6379
  
  # Redis configuration
  config:
    maxmemory: "256mb"
    maxmemoryPolicy: "allkeys-lru"
    appendonly: "yes"

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 250m
    memory: 256Mi

persistence:
  enabled: true
  storageClass: "ebs-gp3"
  size: 1Gi
  accessMode: ReadWriteOnce

probes:
  liveness:
    exec:
      command: ["redis-cli", "ping"]
    initialDelaySeconds: 10
    periodSeconds: 10
  readiness:
    exec:
      command: ["redis-cli", "ping"]
    initialDelaySeconds: 5
    periodSeconds: 5
